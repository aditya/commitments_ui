<ul editable-list editable-list-blank-record editable-list-reorder handle=".handle" on-create="newItem" on-delete="deleteItem" ng-model="selected.items" class="unstyled items">
  <li
    ng-repeat="item in selected.items"
    editable-record ng-model="item"
    animated-hide="(item.who != user.email && !item.delegates[user.email]) || selected.hide(item)"
    on-update="updateItem"
    class="row-fluid item">
    <div requires-object="item.accept" class="row-fluid">
      <ng-include src="'src/views/taskaccept.html'"/>
    </div>
    <div class="row-fluid">
      <span check ng-model="item.done" tooltip="'click here to mark done'" class="span1 checkoff"></span>
      <span markdown required-for="item" ng-model="item.what" placeholder="'New task here'" tooltip="'click to edit'" class="span10"></span>
      <span ng-show="item.what" tooltip="'drag to stack rank'" class="icon-move icon-2x handle muted span1" ></span>
    </div>
    <div ng-show="item.what" require-object 'item.discussion' class="row-fluid item-tools">
      <span requires-array="item.discussion.comments" ng-click="item.discussion.show = !item.discussion.show" tooltip="'comment and chat'">
        <span class="icon icon-comments-alt" ></span>
      </span>
      <span class="icon icon-hand-right" tooltip="'poke your delegates for a status report'" ng-click="poke(item)"></span>
      <span date ng-model="item.due" tooltip="'click to set a due date'"></span>
      <span tags icon="tags" ng-model="item.tags" tooltip="'tags to help organize'"></span>
      <span tags icon="user" ng-model="item.delegates" tooltip="'delegate via email addresses'"></span>
    </div>
    <div ng-show="item.discussion.show" ng-init="discussion=item.discussion" class="row-fluid">
      <ng-include src="'src/views/discussion.html'"/>
    </div>
  </li>
</ul>
